var chartify=(function(d){var b={};var c=function(k,g,i){var f=document.getElementById(k).getContext("2d");var j=i==false?false:g.plugin.animation=="true"?true:false;var h=new Chart(f)[g.type](g.data,{responsive:true,maintainAspectRatio:false,animation:j,animationEasing:g.plugin.animationEasing,tooltipTemplate:a(g)});d.each(h.segments,function(l){this.percentage=g.data[l].percentage});h.update();h.$el=d("#"+k).closest(".canvas-holder");e(h,g.plugin.map);h.$el[0].chartInstance=h;h.$el[0].size=g.plugin.size;h.$el[0].options=g;h.$el[0].elId=k;return h};var a=function(f){var g="";if(f.plugin.map=="none"){g="<%if (label){%><%=label%>: <%}%>"}switch(f.results){case"number":default:g+="<%= value %> "+f.localization.votes;break;case"percentage":g+="<%= percentage %>%";break;case"both":g+="<%= percentage %>% â€¢ <%= value %> "+f.localization.votes;break;case"nothing":g="<%if (label){%><%=label%><%}%>";break}return g};var e=function(g,h){var f=g.$el.siblings(".map-holder");f.html(g.generateLegend());switch(h){case"none":f.addClass("none");break;case"below":default:f.addClass("below");break;case"float":f.addClass("float");break}if(h!="none"){Chart.helpers.each(f[0].firstChild.childNodes,function(i,j){Chart.helpers.addEvent(i,"mouseover",function(){var k=g.segments[j];k.save();k.fillColor=k.highlightColor;g.showTooltip([k]);k.restore()})});Chart.helpers.addEvent(f[0],"mouseout",function(){g.draw()})}};b.init=function(l,h,j,i,g,k){var f={type:h,localization:k,plugin:i,data:j,results:g};c(l,f,true)};return b})(jQuery);