(function($){$.fn.iCheckbox=function(options){if($(this).attr("type")=="checkbox"){var settings=$.extend({switch_container_src:"images/iphone_switch_container.gif",switch_height:27,switch_width:94,switch_speed:150,switch_swing:-53,class_container:"iCheckbox_container",class_switch:"iCheckbox_switch",class_checkbox:"iCheckbox_checkbox",checkbox_hide:true,iCheckOff:function(elem,atime,animOnly){atime=typeof(atime)=="number"?atime:settings.switch_speed;animOnly=animOnly==true?true:false;atime=parseInt(atime)>0?atime:1;if(animOnly==true){$(elem).animate({backgroundPosition:settings.switch_swing},atime,"linear");}else{$(elem).animate({backgroundPosition:settings.switch_swing},atime,"linear",function(){var cB=$($(this).parent()).find("input");$(cB).removeAttr("checked");$(cB).change();});}},iCheckOn:function(elem,atime,animOnly){atime=typeof(atime)=="number"?atime:settings.switch_speed;atime=parseInt(atime)>0?atime:1;if(animOnly==true){$(elem).animate({backgroundPosition:"0"},atime,"linear");}else{$(elem).animate({backgroundPosition:"0"},atime,"linear",function(){var cB=$($(this).parent()).find("input");$(cB).attr("checked","checked");$(cB).change();});}}},options);return this.each(function(){var state=$(this).attr("checked")?"on":"off";var container;var image;container='<span class="'+settings.class_container+'"></span>';$(this).wrap(container);image=$('<img class="'+settings.class_switch+'" src="'+settings.switch_container_src+'" />');$(this).parent().append(image);if(state=="on"){$(this).attr("checked","checked");settings.iCheckOn($(this).parent().find("img"),1);}else{$(this).removeAttr("checked");settings.iCheckOff($(this).parent().find("img"),1);}$(this).parent().find("."+settings.class_switch).click(function(e){var cBox=$($(e.target).parent()).find("input");var state=cBox.is(":checked")?"on":"off";if(state=="on"){state="off";settings.iCheckOff($(this),settings.switch_speed);}else{state="on";settings.iCheckOn($(this),settings.switch_speed);}return e;});if($(this).hasClass(settings.class_checkbox)==false){$(this).addClass(settings.class_checkbox);}if(settings.checkbox_hide==true){$(this).css({display:"none"});}$(this).change(function(e){var cBox=$($(e.target).parent()).find("input");var img=$($(e.target).parent()).find("img");var state=cBox.is(":checked")?"on":"off";if(state=="on"){settings.iCheckOn($(img),settings.switch_speed,true);}else{settings.iCheckOff($(img),settings.switch_speed,true);}return e;});return this;});return this;}else{return false;}};})(jQuery);